import{b,T as g,a as h}from"./index-a50cf3de.js";import{l as k,X as _,aa as y,V as x}from"./index-3038d132.js";import{b as T}from"./controllerUrls-941681c3.js";import v from"./popupForm-5aef5b73.js";import{h as f,Z as p,ap as w,z as C,p as m,l as I,k as n,B as q,M as A,q as s,t as B,an as D}from"./vue-836dfa82.js";import"./index-6e54af73.js";import"./index-9c38993b.js";import"./validate-43384adb.js";const G={class:"default-main ba-table-box"},N=f({name:"auth/group"}),M=f({...N,setup(R){const i=p(),u=p(),{t:a}=k(),e=new b(new _(T),{expandAll:!0,dblClickNotEditColumn:[void 0],column:[{type:"selection",align:"center"},{label:a("auth.group.Group name"),prop:"name",align:"left",width:"200"},{label:a("auth.group.jurisdiction"),prop:"rules",align:"center"},{label:a("state"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:a("Disable"),1:a("Enable")}},{label:a("updatetime"),prop:"updatetime",align:"center",width:"160",render:"datetime"},{label:a("createtime"),prop:"createtime",align:"center",width:"160",render:"datetime"},{label:a("operate"),align:"center",width:"130",render:"buttons",buttons:y(["edit","delete"])}]},{defaultItems:{status:"1"}},{onSubmit:({formEl:r,items:t})=>{var t=w(t);t.rules=i.value.getCheckeds();for(const l in t)t[l]===null&&delete t[l];let o=()=>{e.form.submitLoading=!0,e.api.postData(e.form.operate,t).then(l=>{var c;e.onTableHeaderAction("refresh",{}),e.form.submitLoading=!1,(c=e.form.operateIds)==null||c.shift(),e.form.operateIds.length>0?e.toggleForm("edit",e.form.operateIds):e.toggleForm(),e.runAfter("onSubmit",{res:l})}).catch(()=>{e.form.submitLoading=!1})};return r?(e.form.ref=r,r.validate(l=>{l&&o()})):o(),!1},onTableDblclick:({row:r})=>e.table.extend.adminGroup.indexOf(r.id)===-1},{getIndex:({res:r})=>{e.table.extend.adminGroup=r.data.group;let d=x(e.table.column,"render","buttons");e.table.column[d].buttons.forEach(t=>{t.display=o=>r.data.group.indexOf(o.id)===-1})}});return D("baTable",e),C(()=>{e.table.ref=u.value,e.mount(),e.getIndex()}),(r,d)=>{const t=B("el-alert");return m(),I("div",G,[n(e).table.remark?(m(),q(t,{key:0,class:"ba-table-alert",title:n(e).table.remark,type:"info","show-icon":""},null,8,["title"])):A("",!0),s(g,{buttons:["refresh","add","edit","delete","unfold","quickSearch","columnDisplay"],"quick-search-placeholder":n(a)("quick Search Placeholder",{fields:n(a)("auth.group.GroupName")})},null,8,["quick-search-placeholder"]),s(h,{ref_key:"tableRef",ref:u,pagination:!1},null,512),s(v,{ref_key:"formRef",ref:i},null,512)])}}});export{M as default};
